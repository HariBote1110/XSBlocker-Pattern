// patterns.js - スパムパターンの定義ファイル (グローバル変数版)
console.log("[XS-Blocker] Loading patterns.js...");

const spamPatterns = [
  /**
   * パターン1: 有名人推薦
   */
  {
    id: "celebrity_endorsement", name: "有名人推薦", score: 3,
    triggerPhrases: [
      "さんが推薦", "が推薦する", "が言及した", "が絶賛", "のお墨付き",
      "が太鼓判", "さんが話した", "が言及する", "氏が言及した", "氏が言及する",
      "のお墨付き", "が太鼓判"
    ]
  },
  /**
   * パターン2: 体験談レポート
   */
  {
    id: "experience_report", name: "体験談レポート", baseScore: 0,
    components: {
      intro: { phrases: ["しばらく観察", "たまたまこの投資家", "最近見張っている", "最近発見した", "数ヶ月彼を観察", "数ヶ月見て確信", "数ヶ月追ったら", "ぜひ知ってほしい", "投資が不安な方に朗報"], score: 1 },
      recommendation: { phrases: ["毎日いい銘柄を紹介", "毎日良い銘柄を紹介", "毎日急騰している銘柄", "毎日優良銘柄が", "株を勧めるたびに", "推奨する株", "情報を活用し", "銘柄選びを参考に", "優良な銘柄", "冷静な市場判断", "抜群のサポート", "長年の実践", "推奨している", "紹介してくれている", "紹介している", "的中しまくり", "ドンピシャ"], score: 1 },
      action: { phrases: ["フォローした後", "試しに買ってみたら", "同じ株を買って", "彼が勧めた株を買った", "彼が勧めた株", "彼が推奨する株", "お薦められた銘柄を買ってみたら", "プランを実行してみたら", "彼の指導で", "彼について行って", "彼についていけば"], score: 1 },
      profit: { phrases: ["万円稼ぎました", "万円儲かりました", "万円のプラス", "万円の利益", "万円ゲット", "黒字となり", "資産倍増", "万円稼いで", "万円儲けた", "万円の収益を実現", "萬円の利益を得ました", "百万ちょい儲かり", "万円の利益が出ました"], score: 2 },
      gratitude: { phrases: ["ありがとうございます", "感謝の気持ち", "本当に素晴らしい", "感謝しかない", "先生に感謝", "この先生に感謝", "さんに感謝", "いくら感謝しても", "この出会い感謝", "最高です", "ありがてぇ", "実現してくれました", "感謝します"], score: 1 }
    },
    required: ['profit'], bonusThreshold: 3, bonusScore: 2
  },
  /**
   * パターン3: 兄貴シリーズ
   */
  {
    id: "aniki_series", name: "兄貴シリーズ", baseScore: 0,
    components: {
      start: { phrases: ["兄貴が最近"], score: 1 },
      relation: { phrases: ["没頭している", "注目している", "ハマった", "はまっている", "夢中になった", "好きになった", "おすすめ", "惹かれている", "追いかけている", "見つけた", "マイブーム"], score: 1 },
      title: { phrases: ["クリエイター", "ブロガー", "ネット配信者", "インフルエンサー", "ウェブ著者", "メディア人", "デジタルコンテンツ制作者", "ユーチューバー", "ネットパーソナリティ", "コンテンツメーカー", "ライター", "SNS発信者", "投資家", "株式投資家", "市場分析家", "トレーダー", "デジタルアーティスト"], score: 1 },
      evaluation: { phrases: ["独創的な考え", "面白い考え方", "広い視野", "個性的な観点", "異なる切り口", "魅力的な解釈", "新鮮な発想", "特異な分析", "特別な洞察", "斬新な意見", "珍しい視野", "鋭い分析", "洗練された考察", "ユニークな視点", "素晴らしい視座", "独自の理解", "深い見識"], score: 1 },
      ending: { phrases: ["教えてくれるって", "与えてくれるって", "示してくれるって", "学ばせてくれるって", "教授してくれるって", "解説してくれるって", "共有してくれるって", "紹介してくれるって", "教わったって", "提供してくれるって", "くれるって", "伝えてくれるって"], score: 1 },
      topic: { phrases: ["夏休みに家族", "楽しみだね", "旅行するとのこと", "旅に出るらしい", "旅行に行くと", "旅行を楽しみにしている"], score: 1 }
    },
    required: [], bonusThreshold: 4, bonusScore: 4
  },
  /**
   * パターン4: 危機回避・救済 (修正済み)
   */
  {
    id: "crisis_aversion", name: "危機回避・救済", baseScore: 0,
    components: {
      crisis: { phrases: ["回避できた", "乗り越えられた", "返済ができた"], score: 1 },
      savior: {
        phrases: [
          "さんのお陰", "さんの緻密な市場分析", "さんの親身なサポート", "さんの助言", "さんのおかげ", "さんのサポート",
          "のおかげ", "市場分析", "サポートのおかげ"
        ],
        score: 2
      },
      difficulty: { phrases: ["耐えられないレベルの崩れ", "一歩間違えたら終わってた", "経済的な困難", "借金", "お金のことで悩んで", "金融的な窮状", "この間の暴落"], score: 1},
      emotion: { phrases: ["信じられる人がいるって幸せ", "未来はもっと不安だった", "いくら感謝しても", "どんな生活してるだろ", "本当にありがとう"], score: 1 }
    },
    required: ['crisis', 'savior'],
    bonusThreshold: 2, // crisis と savior の2つがマッチしたらボーナス
    bonusScore: 2
  },
  /**
   * パターン5: アカウント称賛・精度強調 (required 復元、スコア調整版)
   */
  {
    id: "account_praise_accuracy",
    name: "アカウント称賛・精度強調",
    baseScore: 2, // 前回調整した値
    components: {
      introduction: {
        phrases: [
          "毎日必ず確認する", "毎日チェック", "最近見ている", "フォローしている",
          "このアカウント", "推奨アカウント", "注目アカウント"
        ],
        score: 1
      },
      analysis_praise: {
        phrases: [
          "株式分析が素晴らしい", "分析がすごい", "分析力が高い", "分析が的確",
          "投稿が参考になる", "見事な分析", "感心した", "勉強になる"
        ],
        score: 1
      },
      accuracy_claim: {
        phrases: [
          // ★★★ "%" を含むフレーズをコメントアウトまたは修正検討 ★★★
          // "予想が%以上当たる", // ← これがマッチしない原因の可能性
          "予想がパーセント以上当たる", // ← 代替案1
          "予想が当たる", "的中率が凄い", "予測が正確",
          "ほぼ当たる", "驚異の的中率", "予測精度が高い", "高確率で当たる",
          "的中", "ドンピシャ", "ズバリ", "寸分違わず",
          "%以上当たる" // ← 代替案2 (%単体ならどうか？)
        ],
        score: 2
      },
      expert_designation: {
        phrases: [
           "市場の動きを先読みする達人", "本物だ", "天才かと思った", "プロの分析",
           "信頼できる", "先生", "ゴッド", "神がかってる"
        ],
        score: 1
      },
      skepticism: {
        phrases: [
          "最初は本当かなと思った", "最初は半信半疑だった", "最初は疑っていた",
          "最初は信じてなかった"
        ],
        score: 0
      }
    },
    required: ['accuracy_claim', 'expert_designation'], // ★ 元に戻した必須条件 ★
    bonusThreshold: 1,
    bonusScore: 3 // 前回調整した値
  },
  /**
   * パターン6: 単純フレーズ（フォールバック）(関連フレーズ削除版)
   */
  {
    id: "simple_phrases", name: "単独キーワード", score: 1,
    phrases: [
       "今すぐ登録", "DMで詳細", "確実儲かる", "リスクゼロ", "特別ボーナス", "未公開株",
       "極秘情報", "投資ノウハウ", "LINEで情報", "億万長者", "FXの秘密", "仮想通貨",
       "裏技公開", "高リターン", "億の作り方", "FIRE達成", "無料講座", "投資初心者", "今だけ",
       "投資の極意", "不労所得", "成功法則", "儲け術", "限定公開", "高収入", "投資講座",
       "即行動", "儲け話", "参加限定", "簡単儲け", "秘密の投資", "大金稼ぎ", "成功の鍵",
       "お金増やす", "即儲け", "金持ちに", "簡単億稼ぎ", "投資でFIRE", "お金が10倍",
       "金儲け", "儲けの秘訣", "億への道", "儲けの鍵", "投資で億万", "市場心理",
       "リスク管理", "予測方法", "予想の正確さ", /*"市場を先読み",*/ // ← 関連語削除
       "高確率で儲かる", "フォロー必須", "お見逃しなく", "的中率が高過ぎ",
       "もうインサイダーかと思った", "頭悪い俺でも", "有名投資家", "投資のプロ", "資産爆増",
       "資産10倍", "資産激増", "資産増法", "推奨アプリ", "夢の資産", "億の生活",
       "投資成功", "資産増秘訣", "投資で億", "金が増える", "今すぐ投資", "資産急増",
       "投資の神", "億の秘訣", "投資の達人", "資産増やす", "投資で成功", "儲かる話",
       "お金稼ぐ", "投資の勝ち", "資産増の法", "億のチャンス", "成功投資", "資産拡大",
       "投資で金", "お金増法", "投資の魔法", "資産急増法", "金稼ぐ法", "資産増の秘",
       "株式投資家", "投資専門家", "市場分析家", "プロの投資家", "トレーダー",
       "勧める株", "薦めだ株", "万円の利益", "万円の収益", "冷静な市場判断", "長年の実践",
       "抜群のサポート", "緻密な市場分析", "独自の分析手法", "難しい市場環境",
       "実現してくれました", "さんのお陰です", "〜のおかげ", "真剣で信頼できる",
       "この先生は本物", "見ていて安心", "ぜひ知ってほしい", "がこちらです", "ドンピシャ",
       "ズバリ的中", "必ずチェックするブロガー", "優良銘柄"
       // ↓↓↓ 以前追加した関連フレーズは削除（ステップ1の結果を反映）↓↓↓
       // "毎日必ず確認するアカウント",
       // "株式分析が素晴らしい",
       // "予想が%以上当たる",
       // "市場の動きを先読みする達人",
       // "的中率が凄い",
       // "分析力がすごい",
       // "驚異の的中率"
       // ↑↑↑ 削除終了 ↑↑↑
    ]
  }
];
console.log("[XS-Blocker] patterns.js loaded.");